---
id: proxy-overview
title: ConfigCat Proxy
description: The ConfigCat Proxy allows you to host a feature flag evaluation service in your own infrastructure.
toc_max_heading_level: 5
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

The <a target="_blank" href="https://github.com/configcat/configcat-proxy">ConfigCat Proxy</a> allows you to host a feature flag evaluation service in your own infrastructure. It's a small Go application that communicates with ConfigCat's CDN network and caches/proxies *config JSON* files for your frontend and backend applications. The *config JSON* contains all the data that is needed for ConfigCat SDKs to evaluate feature flags.

The Proxy provides the following:
- **Performance**: The Proxy can be deployed close to your applications and can serve the downloaded *config JSON* files from memory. ConfigCat SDKs then can operate on the [proxied *config JSON*](endpoints.mdx#cdn-proxy). This can reduce the duration of feature flag evaluation for stateless or short lived applications.
- **Reliability**: The Proxy can store the downloaded *config JSON* files in an external [cache](#cache). It can fall back to operating on the cached *config JSON* if the ConfigCat CDN network becomes inaccessible.
- **Security**: The Proxy can act as a [server side flag evaluation](endpoints.mdx#api) component. Using it like that can prevent the exposure of *config JSON* files to frontend and mobile applications.
- **Scalability**: Horizontal scaling allows you to align with the load coming from your applications accordingly.
- **Streaming**: The Proxy provides real-time feature flag change notifications via [Server-Sent Events (SSE)](endpoints.mdx#sse) and [gRPC](grpc.mdx).

## Architecture

The following diagram shows the high level architecture of the Proxy.

<img src="/docs/assets/proxy/proxy_arch.png" alt="High level Proxy architecture" decoding="async" loading="lazy" />

### How It Works
The Proxy wraps one or more SDK instances for handling feature flag evaluation requests. It also serves the related *config JSON* files that can be consumed by other ConfigCat SDKs running in your applications. 

Within the Proxy, the underlying SDK instances can run in the following modes:
- **Online**: In this mode, the underlying SDK has an active connection to the ConfigCat CDN network through the internet.
- **Offline**: In [this mode](#offline-mode), the underlying SDK doesn't have an active connection to ConfigCat. Instead, it uses the configured cache or a file as a source of its *config JSON*.

With the combination of the above modes, you can construct a cluster of proxies where only one node is responsible for the communication with ConfigCat, and all the other nodes are working from a central cache.

<img src="/docs/assets/proxy/load_balanced.png" alt="Load balanced Proxy architecture" decoding="async" loading="lazy" />

### Communication

There are three ways how the Proxy is informed about the availability of new feature flag evaluation data:
- **Polling**: The ConfigCat SDKs within the Proxy are regularly polling the ConfigCat CDN for new *config JSON* versions.
- **Webhook**: The Proxy has [webhook endpoints](endpoints.mdx#webhook) (for each underlying SDK) which can be set on the <a target="_blank" href="https://app.configcat.com/product/webhooks">ConfigCat Dashboard</a> to be invoked when someone saves & publishes new feature flag changes.
- **Cache polling / file watching**: In [offline mode](#offline-mode), the Proxy can regularly poll a cache or watch a file for new *config JSON* versions.

These are the ports used by the Proxy by default:
- **8050**: for standard HTTP communication. ([API](endpoints.mdx#api), [CDN proxy](endpoints.mdx#cdn-proxy), [Webhook](endpoints.mdx#webhook), [SSE](endpoints.mdx#sse))
- **8051**: for providing diagnostic data ([status](monitoring.mdx#status), [prometheus metrics](monitoring.mdx#prometheus-metrics)).
- **50051**: for [gRPC](grpc.mdx) communication.

## Installation

You can install the ConfigCat Proxy from the following sources:

<details open>
  <summary><strong>Docker</strong></summary>

The docker image is available on DockerHub. You can run the image either as a standalone docker container or via `docker-compose`.

<Tabs>
<TabItem value="standalone" label="Standalone" default>

Pull the docker image:
```shell
docker pull configcat/proxy
```

Run the ConfigCat Proxy:
```shell
docker run -d --name configcat-proxy \ 
  -p 8050:8050 -p 8051:8051 -p 50051:50051 \
  -e CONFIGCAT_SDKS='{"<sdk-identifier>":"<your-sdk-key>"}' \
  configcat/proxy
```

</TabItem>
<TabItem value="compose" label="docker-compose">

```yaml title="docker-compose.yml"
services:
  configcat_proxy:
    image: configcat/proxy
    environment:
      - CONFIGCAT_SDKS={"<sdk-identifier>":"<your-sdk-key>"}
    ports:
      - "8050:8050"
      - "8051:8051"
      - "50051:50051"
```

To start docker services, execute the following command:
```shell
docker-compose up -f docker-compose.yml -d
```

</TabItem>
</Tabs>

</details>

<details open>
  <summary><strong>Standalone executable</strong></summary>

You can download the executables directly from <a target="_blank" href="https://github.com/configcat/configcat-proxy/releases">GitHub Releases</a> for your desired platform.

</details>

You can then check the [status endpoint](monitoring.mdx#status) of the Proxy to ensure it's working correctly: `http://localhost:8051/status`

## Usage Scenarios

This section describes the possible ways on how you can use the Proxy from your application. 
You can decide where you want the actual feature flag evaluation happen.
- **Local evaluation**: Feature flags are evaluated in your application via a ConfigCat SDK. The Proxy only provides the required data for the evaluation process to the SDK running in your application.
- **Remote evaluation**: Feature flags are evaluated inside the Proxy, your application only gets the result of the evaluation process.
<br />

- ### 1. Local evaluation using a ConfigCat SDK connected to the Proxy

  If the Proxy's [CDN proxy](endpoints.mdx#cdn-proxy) endpoint is enabled, you can set up your ConfigCat SDK instances to use the Proxy as data source.
  To do this, you have to set the SDK's `baseUrl` parameter to the Proxy's host.
  
  ```js title="example.js"
  import * as configcat from "configcat-js";
  
  var configCatClient = configcat.getClient(
    "#YOUR-SDK-KEY#", 
    configcat.PollingMode.AutoPoll,
    // highlight-next-line
    { baseUrl: "http://localhost:8050" } // Proxy URL
  );
  ```
  
  Additionally, as the Proxy maps [unique identifiers to each configured SDK key](#sdk-identifier--sdk-key) it works with, 
  you can use that identifier prefixed with `configcat-proxy/` as the SDK key at the ConfigCat SDK's initialization.
  
  ```js title="example.js"
  import * as configcat from "configcat-js";
  
  var configCatClient = configcat.getClient(
    // highlight-next-line
    "configcat-proxy/my_sdk", // SDK identifier prefixed with 'configcat-proxy/'
    configcat.PollingMode.AutoPoll,
    // highlight-next-line
    { baseUrl: "http://localhost:8050" } // Proxy URL
  );
  ```

- ### 2. Remote evaluation with the Proxy's API endpoints

  You can leverage the Proxy's server side feature flag evaluation feature by sending simple HTTP requests to the Proxy's API endpoints.
  
  ```js title="example.js (Evaluating a feature flag with API)"
  const url = "http://localhost:8050/api/{SDK-ID}/eval"; // Proxy API URL with SDK identifier
  
  const data = {
    key: "isMyAwesomeFeatureEnabled", // Feature flag key
    user: { // User Object for evaluation
      Identifier: "#UNIQUE-USER-IDENTIFIER#"
    }
  };
  
  const requestOptions = {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(data),
  };
  
  fetch(url, requestOptions)
    .then(response => response.json())
    .then(data => console.log(data)) // {"value":<evaluated-value>,"variationId":"<variation-id>"}
    .catch(error => console.error('Error:', error));
  ```
  
  You can find each API endpoint with their HTTP request/response schemas [here](endpoints.mdx#api).

- ### 3. Remote evaluation with OpenFeature Remote Evaluation Protocol (OFREP)

  The Proxy conforms the <a href="https://github.com/open-feature/protocol">OpenFeature Remote Evaluation Protocol</a>, which means it can be used with OFREP compatible OpenFeature providers.
  
  ```js title="example.js (Initializing the OFREP JS Web provider to use the Proxy)"
  import { OFREPWebProvider } from '@openfeature/ofrep-web-provider';

  OpenFeature.setProvider(
    new OFREPWebProvider({
      // highlight-next-line
      baseUrl: 'http://localhost:8050', // Proxy URL
      headers: [
        // highlight-next-line
        ['X-ConfigCat-SdkId', '<sdk-id>'], // SDK identifier
      ],
    }),
  );
  ```
  
  You can find each OFREP endpoint with their HTTP request/response schemas [here](endpoints.mdx#openfeature-remote-evaluation-protocol-ofrep).

- ### 4. Remote evaluation and streaming with SSE

  The Proxy has the ability to evaluate feature flags and send notifications about subsequent evaluated flag value changes through <a target="blank" href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events">Server-Sent Events</a> connections.
  
  ```js title="example.js (Evaluating a feature flag and listening to changes with SSE)"
  const rawData = {
    key: "isMyAwesomeFeatureEnabled", // Feature flag key
    user: { // User Object for evaluation
      Identifier: "#UNIQUE-USER-IDENTIFIER#"
    }
  }
  
  const data = btoa(JSON.stringify(rawData))
  const url = "http://localhost:8050/sse/{SDK-ID}/eval"; // Proxy SSE URL with SDK identifier
  
  const evtSource = new EventSource(url + "/" + data);
  evtSource.onmessage = (event) => {
    console.log(event.data); // {"value":<evaluated-value>,"variationId":"<variation-id>"}
  };
  ```
  
  For more information and usage examples, see the related [SSE endpoints documentation](endpoints.mdx#sse).

- ### 5. Remote evaluation and streaming with gRPC

  The Proxy supports both unary feature flag evaluation RPCs and server streaming of evaluated flag value changes.
  For more information and usage examples, see the [gRPC section of this documentation](grpc.mdx).

## Configuration Options

You can specify options for the Proxy either via a YAML file or with environment variables. When an option is defined in both places, the environment variable's value takes precedence.

The Proxy is able to read the options YAML from the following default locations:

- **Windows**: `%PROGRAMDATA%\configcat\proxy\options.yml`, usually `C:\ProgramData\configcat\proxy\options.yml`
- **macOS**: `/Library/Application Support/configcat/proxy/options.yml`
- **Linux**: `/etc/configcat/proxy/options.yml`

When the default location is not suitable, you can specify a custom location for your options YAML file via the `-c` argument.

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

<details open>
  <summary><strong>Docker</strong></summary>

When running the Proxy in docker, you can mount the options YAML file as a volume.
```shell
docker run -d --name configcat-proxy \ 
  -p 8050:8050 -p 8051:8051 -p 50051:50051 \
  // highlight-next-line
  -v <path-to-file>/options.yml:/etc/configcat/proxy/options.yml
```

(Optional) With the `-c` argument to specify a custom path for your options YAML file:
```shell
docker run -d --name configcat-proxy \ 
  -p 8050:8050 -p 8051:8051 -p 50051:50051 \
  // highlight-next-line
  -v <path-to-file>/options.yml:/cnf/options.yml \
  // highlight-next-line
  configcat/proxy -c /cnf/options.yml
```

</details>

<details open>
  <summary><strong>Standalone executable</strong></summary>

Run the Proxy as a standalone executable with the options YAML file in its default location:

<Tabs groupId="yaml-env-win">
<TabItem value="unix" label="macOS / Linux" default>

```shell
./configcat-proxy
```

</TabItem>
<TabItem value="win" label="Windows">

```powershell
.\configcat-proxy.exe
```

</TabItem>
</Tabs>

(Optional) With the `-c` argument to specify a custom path for your options YAML file:

<Tabs groupId="yaml-env-win">
<TabItem value="unix" label="macOS / Linux" default>

```shell
./configcat-proxy -c /path-to-file/options.yml
```

</TabItem>
<TabItem value="win" label="Windows">

```powershell
.\configcat-proxy.exe -c \path-to-file\options.yml
```

</TabItem>
</Tabs>

</details>

</TabItem>
<TabItem value="env-vars" label="Environment variables">

<details open>
  <summary><strong>Docker</strong></summary>

When running the Proxy in docker, you can pass environment variables for the executing container.
```shell
docker run -d --name configcat-proxy \ 
  -p 8050:8050 -p 8051:8051 -p 50051:50051 \
  // highlight-next-line
  -e CONFIGCAT_SDKS='{"<sdk-identifier>":"<your-sdk-key>"}' \
  configcat/proxy
```

</details>

<details open>
  <summary><strong>Standalone executable</strong></summary>

Make sure the related environment variables are available for the Proxy's hosting process.


<Tabs>
<TabItem value="shell" label="shell">

```shell
export CONFIGCAT_SDKS='{"<sdk-identifier>":"<your-sdk-key>"}'
```

Then start the Proxy:

```shell
./configcat-proxy
```

</TabItem>
<TabItem value="powershell" label="PowerShell">

```powershell
$Env:CONFIGCAT_SDKS='{"<sdk-identifier>":"<your-sdk-key>"}'
```

Then start the Proxy:

```powershell
.\configcat-proxy.exe
```

</TabItem>
</Tabs>

</details>

</TabItem>
</Tabs>

The following sections will go through each available option in detail.

## How does the Proxy get to know about feature flags? {#sdk}

In order to make the Proxy work properly, it must be set up with one or more <a target="blank" href="https://app.configcat.com/sdkkey">SDK keys</a>. 
It instantiates one SDK instance for each SDK key and uses them for feature flag evaluation. 

### SDK Identifier {#sdk-identifier--sdk-key}

To protect the used SDK keys from public exposure, the Proxy maps each of them to a unique SDK identifier. 
These identifiers are used in the path of most Proxy endpoints and in all SDK configuration related environment variable names to identify underlying SDKs.

There are two ways to let the Proxy know which SDK Keys it should use:

- ### 1. Automatic configuration with Proxy Profiles

  The Proxy has the ability to periodically fetch which SDK keys it must include from ConfigCat through Proxy Profiles.
  You can set up Proxy Profiles under the `Manage organization` -> `Proxy Profles` menu on the <a target="_blank" href="https://app.configcat.com/organization/proxy-profiles">ConfigCat Dashboard</a>.
  
  > TODO: Screenshot

  To connect a Proxy instance to a Proxy Profile, follow these steps:

  - #### Create a new Proxy Profile
    Click on the `+ ADD PROFILE` button.
    > TODO: Screenshot

    Give the profile a meaningful name and description, then click `CREATE`.
    > TODO: Screenshot

  - #### Configure your Proxy instance
    Grab the `Key` and `Secret` from the profile creation dialog and put into the Proxy's configuration.
    > TODO: Screenshot

    <Tabs groupId="yaml-env">
    <TabItem value="yaml" label="YAML" default>
    
    ```yaml title="options.yml"
    profile:
      key: <key>
      secret: <secret>
    ```
    
    </TabItem>
    <TabItem value="env-vars" label="Environment variables">
    
    ```shell
    CONFIGCAT_PROFILE_KEY="<key>"
    CONFIGCAT_PROFILE_SECRET="<secret>"
    ```
    
    </TabItem>
    </Tabs>

  - #### Select which SDK Keys your Proxy should use
    Click on the edit icon under the `SDK Keys` column.
    > TODO: Screenshot

    Select the SDK keys you want to make available for your Proxy instance.
    > TODO: Screenshot

    :::info
    By clicking on either the environment names in the column header or the config names in the first column, you can select each SDK key in a row/column.
    :::
    
  - #### (Optional) Set up how your Proxy should be notified about feature flag changes
    There are two ways how a Proxy can detect feature flag changes. Each SDK key is automatically polled for changes in a configured frequency. 
    Besides polling, the Proxy can accept webhook notifications over HTTP on its [webhook endpoint](endpoints.mdx#webhook).

    - ##### SDK poll interval 
      You have the option to control how frequently the SDKs inside the Proxy should poll for changes.  
      Click on the configure icon under the `Connection settings` column, set the poll interval and click on `SAVE POLL INTERVAL`.
      > TODO: Screenshot
    
    - ##### Webhook
      You can set up automatic webhook notifications about feature flag changes to your Proxy by providing its public URL.  
      Click on the configure icon under the `Connection settings` column, then select `Webhook notification`.
      > TODO: Screenshot

      Set your Proxy instance's public URL, then click `ADD PROXY URL`.
      > TODO: Screenshot

      Put the webhook signing key(s) into your Proxy's configuration. 
      Signing keys are for making sure that webhook requests received by your Proxy are sent by ConfigCat.
      Signatures are automatically [verified](../../advanced/notifications-webhooks.mdx#verifying-webhook-requests) by the Proxy.
      > TODO: Screenshot

      <Tabs groupId="yaml-env">
      <TabItem value="yaml" label="YAML" default>
      
      ```yaml title="options.yml"
      profile:
        webhook_signing_key: <signing-key>
      ```
      
      </TabItem>
      <TabItem value="env-vars" label="Environment variables">
      
      ```shell
      CONFIGCAT_PROFILE_WEBHOOK_SIGNING_KEY="<signing-key>"
      ```
      
      </TabItem>
      </Tabs>

      Test the connection to your Proxy instance.
      > TODO: Screenshot      

- ### 2. Manual configuration

  In case of environment variables, the SDK keys can be specified in a **JSON key-value** format, where the **key is the identifier** of a specific SDK and the **value is the actual SDK key**.
  The **SDK identifier** part is later used in [endpoint route variables](endpoints.mdx) to recognize which SDK must serve the given flag evaluation request.
  
  Furthermore, when configuring the Proxy **via environment variables**, the identifier becomes a **part of the SDK specific environment variable's name** using the following format: `CONFIGCAT_<SDK_ID>_<OPTION>`.
  
  For example, suppose we have the following SDK key-value option: `CONFIGCAT_SDKS={"my-sdk":"<your-sdk-key>"}`.  
  In this case, the environment variable that sets the SDK's poll interval will be named as follows: `CONFIGCAT_MY_SDK_POLL_INTERVAL`.
  
  :::info
  The SDK identifier part of the environment variables is always transformed to uppercase and each hyphen (`-`) character is replaced with underscore (`_`).
  :::
  
  In case of a YAML file, the **SDK identifier** is the property name set under the `sdks` node.
  
  ```yaml title="options.yml"
  sdks:
    // highlight-next-line
    my_sdk:
      ...
  ```
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  This is the whole YAML section of the SDK specific options.
  ```yaml title="options.yml"
  sdks:
    my_sdk:
      key: "<your-sdk-key>"
      base_url: "<base-url>"
      poll_interval: 30
      data_governance: <"eu"|"global">
      webhook_signing_key: "<key>"
      webhook_signature_valid_for: 300
      default_user_attributes:
        attribute_key: "<attribute_value>"
      log:
        level: "<error|warn|info|debug>"
      offline:
        log:
          level: "<error|warn|info|debug>"
        enabled: <true|false>
        use_cache: <true|false>
        cache_poll_interval: 5
        local:
          file_path: "./path/local.json"
          polling: <true|false>
          poll_interval: 5
    another_sdk:
      ...
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variables">
  
  These are the SDK specific environment variables.
  ```shell
  CONFIGCAT_SDKS='{"my-sdk":"<your-sdk-key>","another-sdk":"<another-sdk-key>"}'
  CONFIGCAT_MY_SDK_BASE_URL="<base-url>"
  CONFIGCAT_MY_SDK_POLL_INTERVAL=30
  CONFIGCAT_MY_SDK_DATA_GOVERNANCE="<eu|global>"
  CONFIGCAT_MY_SDK_LOG_LEVEL="<error|warn|info|debug>"
  CONFIGCAT_MY_SDK_OFFLINE_ENABLED=<true|false>
  CONFIGCAT_MY_SDK_OFFLINE_LOG_LEVEL="<error|warn|info|debug>"
  CONFIGCAT_MY_SDK_OFFLINE_LOCAL_FILE_PATH="./path/local.json"
  CONFIGCAT_MY_SDK_OFFLINE_LOCAL_POLLING=<true|false>
  CONFIGCAT_MY_SDK_OFFLINE_LOCAL_POLL_INTERVAL=5
  CONFIGCAT_MY_SDK_OFFLINE_USE_CACHE=<true|false>
  CONFIGCAT_MY_SDK_OFFLINE_CACHE_POLL_INTERVAL=5
  CONFIGCAT_MY_SDK_WEBHOOK_SIGNING_KEY="<key>"
  CONFIGCAT_MY_SDK_WEBHOOK_SIGNATURE_VALID_FOR=300
  CONFIGCAT_MY_SDK_DEFAULT_USER_ATTRIBUTES='{"attribute_key":"<attribute_value>"}'
  
  CONFIGCAT_ANOTHER_SDK_POLL_INTERVAL=15
  ...
  ```
  
  </TabItem>
  </Tabs>
  
  Here's the explanation for each option:
  
  #### SDK Identifier / SDK Key mapping
  
  <table className="proxy-arg-table">
  <thead><tr><th>Option</th><th>Description</th></tr></thead>
  <tbody>
  <tr>
  <td>
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  ```yaml
  my_sdk:
    key: "<your-sdk-key>"
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variable">
  
  ```shell
  CONFIGCAT_SDKS={"my_sdk":"<your-sdk-key>"}
  ```
  
  </TabItem>
  </Tabs>
  
  </td>
  <td>The <strong>SDK identifier</strong> and the <strong>SDK key</strong>. The <strong>SDK identifier</strong> is used in <a href="/docs/advanced/proxy/endpoints">endpoint route variables</a> to recognize which SDK must serve the given flag evaluation request. The <a target="blank" href="https://app.configcat.com/sdkkey">SDK key</a> is crucial for the underlying SDK to operate.</td>
  </tr>
  </tbody>
  </table>
  
  #### Additional SDK Options
  
  <table className="proxy-arg-table">
  <thead><tr><th>Option</th><th>Default</th><th>Description</th></tr></thead>
  <tbody>
  <tr>
  <td>
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  ```yaml
  my_sdk:
    base_url: "<base-url>"
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variable">
  
  ```shell
  CONFIGCAT_MY_SDK_BASE_URL="<base-url>"
  ```
  
  </TabItem>
  </Tabs>
  
  </td>
  <td>ConfigCat's CDN url.</td>
  <td>The CDN base url (forward proxy, dedicated subscription) from where the SDK will download the <code>config.json</code>.</td>
  </tr>
  
  <tr>
  <td>
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  ```yaml
  my_sdk:
    poll_interval: 30
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variable">
  
  ```shell
  CONFIGCAT_MY_SDK_POLL_INTERVAL=30
  ```
  
  </TabItem>
  </Tabs>
  
  </td>
  <td><code>30</code></td>
  <td>The underlying SDK's polling interval in seconds.</td>
  </tr>
  
  <tr>
  <td>
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  ```yaml
  my_sdk:
    data_governance: "<global|eu>"
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variable">
  
  ```shell
  CONFIGCAT_MY_SDK_DATA_GOVERNANCE="<global|eu>"
  ```
  
  </TabItem>
  </Tabs>
  
  </td>
  <td><code>global</code></td>
  <td>Describes the location of your feature flag and setting data within the ConfigCat CDN. This parameter needs to be in sync with your Data Governance preferences. <a href="/docs/advanced/data-governance">More about Data Governance</a>.</td>
  </tr>
  
  <tr>
  <td>
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  ```yaml
  my_sdk:
    webhook_signing_key: "<key>"
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variable">
  
  ```shell
  CONFIGCAT_MY_SDK_WEBHOOK_SIGNING_KEY="<key>"
  ```
  
  </TabItem>
  </Tabs>
  
  </td>
  <td>-</td>
  <td>The <a href="/docs/advanced/notifications-webhooks/#calculating-signature">key used to sign</a> the webhook requests sent to the Proxy. <a href="/docs/advanced/proxy/endpoints#webhook">More about the webhook endpoint</a>.</td>
  </tr>
  
  <tr>
  <td>
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  ```yaml
  my_sdk:
    webhook_signature_valid_for: 300
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variable">
  
  ```shell
  CONFIGCAT_MY_SDK_WEBHOOK_SIGNATURE_VALID_FOR=300
  ```
  
  </TabItem>
  </Tabs>
  
  </td>
  <td><code>300</code></td>
  <td>The time period within the webhook requests are considered valid. <a href="/docs/advanced/proxy/endpoints#webhook">More about the webhook endpoint</a>.</td>
  </tr>
  
  <tr>
  <td>
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  ```yaml
  my_sdk:
    default_user_attributes:
      attribute_key: "<attribute_value>"
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variable">
  
  ```shell
  CONFIGCAT_MY_SDK_DEFAULT_USER_ATTRIBUTES='{"attribute_key":"<attribute_value>"}'
  ```
  
  </TabItem>
  </Tabs>
  
  </td>
  <td>-</td>
  <td>Additional SDK specific <a href="#default-user-attributes">default user attributes</a>. The Proxy will use these attributes when an evaluation request doesn't contain a value for the predefined attribute.<br />When there's a default value defined for the same attribute at both SDK and global level, the one at the SDK level will take precedence.</td>
  </tr>
  
  <tr>
  <td>
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  ```yaml
  my_sdk:
    log:
      level: "<error|warn|info|debug>"
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variable">
  
  ```shell
  CONFIGCAT_MY_SDK_LOG_LEVEL="<error|warn|info|debug>"
  ```
  
  </TabItem>
  </Tabs>
  
  </td>
  <td><code>warn</code></td>
  <td>The verbosity of the SDK related logs.<br />Possible values: <code>error</code>, <code>warn</code>, <code>info</code>, or <code>debug</code>.</td>
  </tr>
  
  </tbody>
  </table>
  
  #### Offline Mode
  
  The following options are specific to the SDK's offline mode. In offline mode, there are two ways the Proxy can get the required feature flag evaluation data for the underlying SDKs.
  
  - **Polling a cache**: The Proxy can poll a cache for feature flag changes. It can use the same cache that an **online** Proxy instance writes. <a href="#cache">More about the cache option</a>.
  - **Watching / polling a file**: The Proxy can watch or poll for modifications in a file that contains the evaluation data of feature flags. For watching, the Proxy uses the <a target="blank" href="https://github.com/fsnotify/fsnotify">fsnotify</a> library.
  
  
  <table className="proxy-arg-table">
  <thead><tr><th>Option</th><th>Default</th><th>Description</th></tr></thead>
  <tbody>
  <tr>
  <td>
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  ```yaml
  my_sdk:
    offline:
      enabled: <true|false>
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variable">
  
  ```shell
  CONFIGCAT_MY_SDK_OFFLINE_ENABLED=<true|false>
  ```
  
  </TabItem>
  </Tabs>
  
  </td>
  <td><code>false</code></td>
  <td>Turns the SDK's offline mode on/off. In offline mode the SDK will not communicate with the ConfigCat CDN network. Instead, it uses the configured cache or a file as the source of its <code>config.json</code>.</td>
  </tr>
  
  <tr>
  <td>
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  ```yaml
  my_sdk:
    offline:
      use_cache: <true|false>
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variable">
  
  ```shell
  CONFIGCAT_MY_SDK_OFFLINE_USE_CACHE=<true|false>
  ```
  
  </TabItem>
  </Tabs>
  
  </td>
  <td><code>false</code></td>
  <td>Indicates whether the SDK should use the configured cache as the source of its <code>config.json</code>. <a href="#cache">More about the cache option</a>.</td>
  </tr>
  
  <tr>
  <td>
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  ```yaml
  my_sdk:
    offline:
      cache_poll_interval: 5
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variable">
  
  ```shell
  CONFIGCAT_MY_SDK_OFFLINE_CACHE_POLL_INTERVAL=5
  ```
  
  </TabItem>
  </Tabs>
  
  </td>
  <td><code>5</code></td>
  <td>The cache polling interval in seconds. Used only, when the <code>use_cache</code> option is <code>true</code>. <a href="#cache">More about the cache option</a>.</td>
  </tr>
  
  <tr>
  <td>
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  ```yaml
  my_sdk:
    offline:
      log:
        level: "<error|warn|info|debug>"
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variable">
  
  ```shell
  CONFIGCAT_MY_SDK_OFFLINE_LOG_LEVEL="<error|warn|info|debug>"
  ```
  
  </TabItem>
  </Tabs>
  
  </td>
  <td><code>warn</code></td>
  <td>The verbosity of the offline mode related logs.<br />Possible values: <code>error</code>, <code>warn</code>, <code>info</code> or <code>debug</code>.</td>
  </tr>
  
  <tr>
  <td>
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  ```yaml
  my_sdk:
    offline:
      local:
        file_path: "./path/local.json"
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variable">
  
  ```shell
  CONFIGCAT_MY_SDK_OFFLINE_LOCAL_FILE_PATH="./path/local.json"
  ```
  
  </TabItem>
  </Tabs>
  
  </td>
  <td>-</td>
  <td>Path to the local file that contains the appropriate <code>config.json</code>.</td>
  </tr>
  
  <tr>
  <td>
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  ```yaml
  my_sdk:
    offline:
      local:
        polling: <true|false>
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variable">
  
  ```shell
  CONFIGCAT_MY_SDK_OFFLINE_LOCAL_POLLING=<true|false>
  ```
  
  </TabItem>
  </Tabs>
  
  </td>
  <td><code>false</code></td>
  <td>Indicates whether the Proxy should switch to local file polling instead of file system watching.</td>
  </tr>
  
  <tr>
  <td>
  
  <Tabs groupId="yaml-env">
  <TabItem value="yaml" label="YAML" default>
  
  ```yaml
  my_sdk:
    offline:
      local:
        poll_interval: 5
  ```
  
  </TabItem>
  <TabItem value="env-vars" label="Environment variable">
  
  ```shell
  CONFIGCAT_MY_SDK_OFFLINE_LOCAL_POLL_INTERVAL=5
  ```
  
  </TabItem>
  </Tabs>
  
  </td>
  <td><code>5</code></td>
  <td>The polling interval of the local file in seconds.</td>
  </tr>
  </tbody>
  </table>

## Default User Attributes

There's an option to predefine [User Object](../../targeting/user-object.mdx) attributes with default values. Whenever the Proxy receives an evaluation request it will automatically attach these predefined attributes to the request. If the evaluation request contains a different value for an attribute you previously defined, the request's value will take precedence.

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
default_user_attributes:
  attribute_key1: "<attribute_value1>"
  attribute_key2: "<attribute_value2>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variables">

```shell
CONFIGCAT_DEFAULT_USER_ATTRIBUTES='{"attribute_key1":"<attribute_value1>","attribute_key2":"<attribute_value2>"}'
```

</TabItem>
</Tabs>

:::info
It's also possible to set default user attributes at the SDK level. See the [SDK options](#additional-sdk-options) section below for more details.
:::

## Global Offline Mode

It is possible to turn on offline mode globally for a whole Proxy instance. When it's turned on, each underlying SDK switches to work from the configured [cache](#cache).

<table className="proxy-arg-table">
<thead><tr><th>Option</th><th>Default</th><th>Description</th></tr></thead>
<tbody>
<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
offline:
  enabled: <true|false>
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_OFFLINE_ENABLED=<true|false>
```

</TabItem>
</Tabs>

</td>
<td><code>false</code></td>
<td>Turns the global offline mode on/off.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
offline:
  cache_poll_interval: 5
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_OFFLINE_CACHE_POLL_INTERVAL=5
```

</TabItem>
</Tabs>

</td>
<td><code>5</code></td>
<td>The cache polling interval in seconds. <a href="#cache">More about the cache option</a>.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
offline:
  log:
    level: "<error|warn|info|debug>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_OFFLINE_LOG_LEVEL="<error|warn|info|debug>"
```

</TabItem>
</Tabs>

</td>
<td><code>warn</code></td>
<td>The verbosity of the offline mode related logs.<br />Possible values: <code>error</code>, <code>warn</code>, <code>info</code> or <code>debug</code>.</td>
</tr>
</tbody>
</table>

:::note
When an SDK also has its offline option set, that will override what it would inherit from the global offline option.
:::

## Cache

The Proxy in its default setup stores all the information it needs for feature flag evaluation in memory. This behavior is extendable with an external cache that you can use for pointing the underlying SDKs to your own data storage.

Currently, <a target="blank" href="https://redis.io">Redis</a>, <a target="blank" href="https://mongodb.com/">MongoDB</a>, and <a target="blank" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide">DynamoDB</a> is supported as external cache. The cache key for the underlying SDKs is based on the [SDK Key](#sdk-identifier--sdk-key). This means that multiple Proxy instances using the same SDK key will read/write the same cache entry.

:::info
The ConfigCat Proxy supports *shared caching*, which means it can feed an external cache that is shared by other ConfigCat SDKs. You can read more about this feature and the required minimum SDK versions [here](../caching.mdx#shared-cache).

<img src="/docs/assets/proxy/shared_cache.png" alt="Shared cache architecture" decoding="async" loading="lazy" />

:::

### Redis

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

This is the whole YAML section of the Redis specific options.
```yaml title="options.yml"
cache:
  redis:
    enabled: <true|false>
    db: 0
    user: "<user>"
    password: "<pass>"
    addresses: ["<addr1>", "<addr2>"]
    tls: 
      enabled: <true|false>
      min_version: <1.0|1.1|1.2|1.3>
      server_name: "<server-name>"
      certificates:
        - cert: "<path-to-cert>"
          key: "<path-to-key>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variables">

These are the Redis specific environment variables.
```shell
CONFIGCAT_CACHE_REDIS_ENABLED=<true|false>
CONFIGCAT_CACHE_REDIS_DB=0
CONFIGCAT_CACHE_REDIS_USER="<user>"
CONFIGCAT_CACHE_REDIS_PASSWORD="<pass>"
CONFIGCAT_CACHE_REDIS_ADDRESSES='["<addr1>", "<addr2>"]'
CONFIGCAT_CACHE_REDIS_TLS_ENABLED=<true|false>
CONFIGCAT_CACHE_REDIS_TLS_MIN_VERSION=<1.0|1.1|1.2|1.3>
CONFIGCAT_CACHE_REDIS_TLS_SERVER_NAME="<server-name>"
CONFIGCAT_CACHE_REDIS_TLS_CERTIFICATES='[{"key":"<path-to-key>","cert":"<path-to-cert>"}]'
```

</TabItem>
</Tabs>

Here's the explanation for each option:

<table className="proxy-arg-table">
<thead><tr><th>Option</th><th>Default</th><th>Description</th></tr></thead>
<tbody>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  redis:
    enabled: <true|false>
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_REDIS_ENABLED=<true|false>
```

</TabItem>
</Tabs>

</td>
<td><code>false</code></td>
<td>Turns caching into Redis on/off.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  redis:
    addresses: ["<addr1>", "<addr2>"]
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_REDIS_ADDRESSES='["<addr1>", "<addr2>"]'
```

</TabItem>
</Tabs>

</td>
<td><code>["localhost:6379"]</code></td>
<td>The addresses of the Redis instances. The Proxy uses <a target="blank" href="https://redis.uptrace.dev/guide/universal.html">Universal Redis clients</a>, so if the array contains multiple addresses, it will use a <code>ClusterClient</code> instance.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  redis:
    db: 0
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_REDIS_DB=0
```

</TabItem>
</Tabs>

</td>
<td><code>0</code></td>
<td>The selected Redis database.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  redis:
    user: "<user>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_REDIS_USER="<user>"
```

</TabItem>
</Tabs>

</td>
<td>-</td>
<td>The username for connecting to Redis.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  redis:
    password: "<pass>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_REDIS_PASSWORD="<pass>"
```

</TabItem>
</Tabs>

</td>
<td>-</td>
<td>The password for connecting to Redis.</td>
</tr>
</tbody>
</table>

The following options are for securing the connection to Redis with TLS.

<table className="proxy-arg-table">
<thead><tr><th>Option</th><th>Default</th><th>Description</th></tr></thead>
<tbody>
<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  redis:
    tls: 
      enabled: <true|false>
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_REDIS_TLS_ENABLED=<true|false>
```

</TabItem>
</Tabs>

</td>
<td><code>false</code></td>
<td>Turns the TLS connection to Redis on/off.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  redis:
    tls: 
      min_version: <1.0|1.1|1.2|1.3>
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_REDIS_TLS_MIN_VERSION=<1.0|1.1|1.2|1.3>
```

</TabItem>
</Tabs>

</td>
<td><code>1.2</code></td>
<td>The minimum TLS version to use.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  redis:
    tls: 
      server_name: "<server-name>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_REDIS_TLS_SERVER_NAME="<server-name>"
```

</TabItem>
</Tabs>

</td>
<td>-</td>
<td>The name of the Redis server.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  redis:
    certificates:
      - cert: "<path-to-cert>"
        key: "<path-to-key>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_REDIS_TLS_CERTIFICATES='[{"key":"<path-to-key>","cert":"<path-to-cert>"}]'
```

</TabItem>
</Tabs>

</td>
<td>-</td>
<td>A list of TLS certificate/key pairs.</td>
</tr>
</tbody>
</table>

### MongoDB

When the configured MongoDB database and collection doesn't exist, the Proxy automatically creates them. The following document structure is used to store the downloaded _config JSON_ in BSON format: 
```json
{ 
  "key": "<The unique cache key determined by the ConfigCat SDK within the Proxy>", 
  "payload": "<The downloaded config JSON in a standardized format determined by the ConfigCat SDK within the Proxy>" 
}
```  
At the collection creation, the Proxy also creates a unique index for the `key` field.

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

This is the whole YAML section of the MongoDB specific options.
```yaml title="options.yml"
cache:
  mongodb:
    enabled: <true|false>
    url: "<connection-url>"
    database: "<database-name>"
    collection: "<collection-name>"
    tls: 
      enabled: <true|false>
      min_version: <1.0|1.1|1.2|1.3>
      server_name: "<server-name>"
      certificates:
        - cert: "<path-to-cert>"
          key: "<path-to-key>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variables">

These are the MongoDB specific environment variables.
```shell
CONFIGCAT_CACHE_MONGODB_ENABLED=<true|false>
CONFIGCAT_CACHE_MONGODB_URL="<connection-url>"
CONFIGCAT_CACHE_MONGODB_DATABASE="<database-name>"
CONFIGCAT_CACHE_MONGODB_COLLECTION="<collection-name>"
CONFIGCAT_CACHE_MONGODB_TLS_ENABLED=<true|false>
CONFIGCAT_CACHE_MONGODB_TLS_MIN_VERSION=<1.0|1.1|1.2|1.3>
CONFIGCAT_CACHE_MONGODB_TLS_SERVER_NAME="<server-name>"
CONFIGCAT_CACHE_MONGODB_TLS_CERTIFICATES='[{"key":"<path-to-key>","cert":"<path-to-cert>"}]'
```

</TabItem>
</Tabs>

Here's the explanation for each option:

<table className="proxy-arg-table">
<thead><tr><th>Option</th><th>Default</th><th>Description</th></tr></thead>
<tbody>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  mongodb:
    enabled: <true|false>
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_MONGODB_ENABLED=<true|false>
```

</TabItem>
</Tabs>

</td>
<td><code>false</code></td>
<td>Turns caching into MongoDB on/off.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  mongodb:
    url: "<connection-url>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_MONGODB_URL="<connection-url>"
```

</TabItem>
</Tabs>

</td>
<td><code>-</code></td>
<td>The [connection url](https://www.mongodb.com/docs/drivers/go/current/fundamentals/connections/connection-guide/#connection-uri) to MongoDB.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  mongodb:
    database: "<database-name>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_MONGODB_DATABASE="<database-name>"
```

</TabItem>
</Tabs>

</td>
<td><code>configcat_proxy</code></td>
<td>The name of the MongoDB database that the Proxy will use for storing data.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  mongodb:
    collection: "<collection-name>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_MONGODB_COLLECTION="<collection-name>"
```

</TabItem>
</Tabs>

</td>
<td><code>cache</code></td>
<td>The name of the collection inside the MongoDB database.</td>
</tr>

</tbody>
</table>

The following options are for securing the connection to MongoDB with TLS.

<table className="proxy-arg-table">
<thead><tr><th>Option</th><th>Default</th><th>Description</th></tr></thead>
<tbody>
<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  mongodb:
    tls: 
      enabled: <true|false>
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_MONGODB_TLS_ENABLED=<true|false>
```

</TabItem>
</Tabs>

</td>
<td><code>false</code></td>
<td>Turns the TLS connection to MongoDB on/off.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  mongodb:
    tls: 
      min_version: <1.0|1.1|1.2|1.3>
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_MONGODB_TLS_MIN_VERSION=<1.0|1.1|1.2|1.3>
```

</TabItem>
</Tabs>

</td>
<td><code>1.2</code></td>
<td>The minimum TLS version to use.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  mongodb:
    tls: 
      server_name: "<server-name>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_MONGODB_TLS_SERVER_NAME="<server-name>"
```

</TabItem>
</Tabs>

</td>
<td>-</td>
<td>The name of the MongoDB server.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  mongodb:
    certificates:
      - cert: "<path-to-cert>"
        key: "<path-to-key>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_MONGODB_TLS_CERTIFICATES='[{"key":"<path-to-key>","cert":"<path-to-cert>"}]'
```

</TabItem>
</Tabs>

</td>
<td>-</td>
<td>A list of TLS certificate/key pairs.</td>
</tr>
</tbody>
</table>

### DynamoDB

By default, the Proxy uses the standard [AWS CLI environment variables](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html) (or a local AWS configuration file) to read the AWS credentials and region for connecting to DynamoDB. 

The Proxy doesn't create the DynamoDB table automatically, it must already exist with a partition key called `key`. The data stored in the table has the following attributes:
- `key`: The unique cache key determined by the ConfigCat SDK within the Proxy.
- `payload`: The downloaded _config JSON_ in a standardized format determined by the ConfigCat SDK within the Proxy.

The following permissions are needed to read and write the table:

- `GetItem`
- `PutItem`

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

This is the whole YAML section of the DynamoDB specific options.
```yaml title="options.yml"
cache:
  dynamodb:
    enabled: <true|false>
    url: "<url>"
    table: "<table-name>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variables">

These are the DynamoDB specific environment variables.
```shell
CONFIGCAT_CACHE_DYNAMODB_ENABLED=<true|false>
CONFIGCAT_CACHE_DYNAMODB_URL="<url>"
CONFIGCAT_CACHE_DYNAMODB_TABLE="<table-name>"
```

</TabItem>
</Tabs>

Here's the explanation for each option:

<table className="proxy-arg-table">
<thead><tr><th>Option</th><th>Default</th><th>Description</th></tr></thead>
<tbody>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  dynamodb:
    enabled: <true|false>
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_DYNAMODB_ENABLED=<true|false>
```

</TabItem>
</Tabs>

</td>
<td><code>false</code></td>
<td>Turns caching into DynamoDB on/off.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  dynamodb:
    url: "<url>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_DYNAMODB_URL="<url>"
```

</TabItem>
</Tabs>

</td>
<td><code>-</code></td>
<td>The DynamoDB service endpoint.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
cache:
  dynamodb:
    table: "<table-name>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_CACHE_DYNAMODB_TABLE="<table-name>"
```

</TabItem>
</Tabs>

</td>
<td><code>configcat_proxy_cache</code></td>
<td>The name of the DynamoDB table that the Proxy will use for storing data.</td>
</tr>

</tbody>
</table>

## HTTP

The following HTTP and HTTP Proxy related options are available:

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml title="options.yml"
http:
  enabled: <true|false>
  port: 8050
  log: 
    level: "<error|warn|info|debug>"
  status:
    enabled: <true|false>

http_proxy:
  url: "<proxy-url>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variables">

```shell
CONFIGCAT_HTTP_ENABLED=<true|false>
CONFIGCAT_HTTP_PORT=8050
CONFIGCAT_HTTP_LOG_LEVEL="<error|warn|info|debug>"
CONFIGCAT_HTTP_STATUS_ENABLED=<true|false>

CONFIGCAT_HTTP_PROXY_URL="<proxy-url>"
```

</TabItem>
</Tabs>

Here's the explanation for each option:

<table className="proxy-arg-table">
<thead><tr><th>Option</th><th>Default</th><th>Description</th></tr></thead>
<tbody>
<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
http: 
  enabled: <true|false>
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_HTTP_ENABLED=<true|false>
```

</TabItem>
</Tabs>

</td>
<td><code>true</code></td>
<td>Turns the main HTTP server on/off. This server hosts the <a href="/docs/advanced/proxy/endpoints#cdn-proxy">CDN proxy</a>, <a href="/docs/advanced/proxy/endpoints#api">API</a>, <a href="/docs/advanced/proxy/endpoints#sse">SSE</a>, and <a href="/docs/advanced/proxy/endpoints#webhook">webhook</a> endpoints.</td>
</tr>
<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
http:
  port: 8050
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_HTTP_PORT=8050
```

</TabItem>
</Tabs>

</td>
<td><code>8050</code></td>
<td>The main HTTP server's port.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
http:
  log:
    level: "<error|warn|info|debug>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_HTTP_LOG_LEVEL="<error|warn|info|debug>"
```

</TabItem>
</Tabs>

</td>
<td><code>warn</code></td>
<td>The verbosity of the HTTP related logs.<br />Possible values: <code>error</code>, <code>warn</code>, <code>info</code>, or <code>debug</code>.<br />When <code>debug</code> is set, the Proxy will log each HTTP request with additional details.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
http:
  status: 
    enabled: <true|false>
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_HTTP_STATUS_ENABLED=<true|false>
```

</TabItem>
</Tabs>

</td>
<td><code>false</code></td>
<td>Turns the hosting of the <a href="/docs/advanced/proxy/monitoring/#status">status endpoint</a> on the main HTTP port (default: <code>8050</code>) on/off.</td>
</tr>

</tbody>
</table>

### HTTP Proxy

<table className="proxy-arg-table">
<thead><tr><th>Option</th><th>Default</th><th>Description</th></tr></thead>
<tbody>
<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
http_proxy:
  url: "<proxy-url>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_HTTP_PROXY_URL="<proxy-url>"
```

</TabItem>
</Tabs>

</td>
<td>-</td>
<td>The network proxy's URL that the ConfigCat Proxy must use for communication through the internet.</td>
</tr>

</tbody>
</table>

### Endpoints

The options for HTTP endpoints are discussed in the [Endpoints](endpoints.mdx) section.

## TLS

For securing direct communication to the ConfigCat Proxy, you have the option to set up TLS. Another option would be to use a full-featured reverse proxy that secures the communication and forwards each request to the Proxy.

The following options are for the first scenario where you secure the direct HTTP and gRPC communication.

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml title="options.yml"
tls: 
  enabled: <true|false>
  min_version: <1.0|1.1|1.2|1.3>
  certificates:
    - cert: "<path-to-cert>"
      key: "<path-to-key>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variables">

```shell
CONFIGCAT_TLS_ENABLED=<true|false>
CONFIGCAT_TLS_MIN_VERSION=<1.0|1.1|1.2|1.3>
CONFIGCAT_TLS_CERTIFICATES='[{"key":"<path-to-key>","cert":"<path-to-cert>"}]'
```

</TabItem>
</Tabs>

Here's the explanation for each option:

<table className="proxy-arg-table">
<thead><tr><th>Option</th><th>Default</th><th>Description</th></tr></thead>
<tbody>
<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
tls: 
  enabled: <true|false>
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_TLS_ENABLED=<true|false>
```

</TabItem>
</Tabs>

</td>
<td><code>false</code></td>
<td>Turns the enforcement of TLS connection to the ConfigCat Proxy on/off.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
tls: 
  min_version: <1.0|1.1|1.2|1.3>
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_TLS_MIN_VERSION=<1.0|1.1|1.2|1.3>
```

</TabItem>
</Tabs>

</td>
<td><code>1.2</code></td>
<td>The minimum TLS version to accept.</td>
</tr>

<tr>
<td>

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
tls:
  certificates:
    - cert: "<path-to-cert>"
      key: "<path-to-key>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variable">

```shell
CONFIGCAT_TLS_CERTIFICATES='[{"key":"<path-to-key>","cert":"<path-to-cert>"}]'
```

</TabItem>
</Tabs>

</td>
<td>-</td>
<td>A list of TLS certificate/key pairs.</td>
</tr>
</tbody>
</table>

## Logging

The Proxy supports the following log levels: `debug`, `info`, `warn`, and `error`. The default is `warn`.

You can specify the log level either globally or for each individual component. If you don't set a component's log level explicitly, it will inherit the global level's value.

<Tabs groupId="yaml-env">
<TabItem value="yaml" label="YAML" default>

```yaml
log:
  level: "<error|warn|info|debug>"
```

</TabItem>
<TabItem value="env-vars" label="Environment variables">

```shell
CONFIGCAT_LOG_LEVEL="<error|warn|info|debug>"
```

</TabItem>
</Tabs>

:::info
When the main HTTP server's or gRPC server's log level is set to `debug`, each HTTP request or RPC the Proxy receives is logged with additional details. (duration, response status, etc.)
:::
